"use strict";var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Lista(e){var t=0,a=e.enca.map(function(e){return React.createElement("th",{key:t++},e)});return React.createElement("tr",null,a)}var RecordDetalle=function(e){_inherits(t,React.Component);function t(e){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleDeleteRecord=a.handleDeleteRecord.bind(a),a}return _createClass(t,[{key:"handleDeleteRecord",value:function(){var e=this.props.registro.idbanco;this.props;$(".test.modal").modal({closable:!1,onApprove:function(){$.ajax({url:base_url+"/api/GeneralV1/bancos/"+e,type:"DELETE",dataType:"json",success:function(e){e.status}.bind(this),error:function(e,t,a){console.log("error")}.bind(this)})}}).modal("show")}},{key:"render",value:function(){var e=this.props.registro.activo?React.createElement("i",{className:"green checkmark icon"}):"";return React.createElement("tr",null,React.createElement("td",null,this.props.registro.idbanco),React.createElement("td",null,this.props.registro.nombre),React.createElement("td",null,e),React.createElement("td",{className:" center aligned"},React.createElement("a",{"data-tooltip":"Editar registro"},React.createElement("i",{className:"edit icon circular green"})),"  ",React.createElement("a",{"data-tooltip":"Eliminar registro"},React.createElement("i",{className:"trash outline icon circular red",onClick:this.handleDeleteRecord}))))}}]),t}(),Captura=function(e){_inherits(t,React.Component);function t(e){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={idbanco:"",nombre:"",activo:!0,csrf:"",boton:"Enviar"},a.handleInputChange=a.handleInputChange.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a}return _createClass(t,[{key:"componentWillMount",value:function(){var e=$("#csrf").val();this.setState({csrf:e})}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;if(this.setState(_defineProperty({},n,a)),"idbanco"===n){var c=t.value;""===c&&(c="-"),$.ajax({url:base_url+"/api/GeneralV1/bancos/"+c,type:"GET",dataType:"json",success:function(e){!1===e.result?this.setState({nombre:"",activo:!0,boton:"Enviar"}):this.setState({nombre:e.result[0].nombre,activo:e.result[0].activo,boton:"Actualizar"})}.bind(this),error:function(e,t,a){this.setState({boton:"Enviar"}),console.log("error")}.bind(this)})}}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=$(".get.bancos form"),a=t.form("get values"),n=t.form("get value","csrf_bancomunidad_token"),c="Enviar"===this.state.boton?"POST":"PUT";$.ajax({url:base_url+"api/GeneralV1/bancos",type:c,dataType:"json",data:{csrf_bancomunidad_token:n,data:a},success:function(e){"OK"===e.status&&(this.setState({idbanco:"",nombre:"",activo:!0,csrf:e.newtoken}),this.props.onClickAdd(e.message,"ui positive floating message",!0),this.setState({boton:"Enviar"}))}.bind(this),error:function(e,t,a){var n="";if(404===e.status)this.setState({csrf:e.responseJSON.newtoken}),n=e.responseJSON.message;else if(409===e.status){var c="",i=e.responseText.indexOf('{"status"');0!==i&&(c=e.responseText.substring(i));var r=JSON.parse(c);this.setState({csrf:r.newtoken}),n=r.message}this.props.onClickAdd(n,"ui negative floating message",!1)}.bind(this)})}},{key:"render",value:function(){return React.createElement("div",{class:"ui container"},React.createElement("div",{className:"ui styled fluid accordion"},React.createElement("div",{className:"title active"},React.createElement("i",{className:"dropdown icon"})," Captura "),React.createElement("div",{className:"content active"},React.createElement("div",{className:"get bancos"},React.createElement("form",{className:"ui form",ref:"form",onSubmit:this.handleSubmit,method:"post"},React.createElement("input",{type:"hidden",name:"csrf_bancomunidad_token",value:this.state.csrf}),React.createElement("div",{className:"fields"},React.createElement("div",{className:"two wide field"},React.createElement("label",{for:"idbancolabel"},"Clave"),React.createElement("input",{id:"idbanco",name:"idbanco",type:"text",value:this.state.idbanco,onChange:this.handleInputChange})),React.createElement("div",{className:"ten wide field"},React.createElement("label",{for:"nombrelabel"},"Nombre"),React.createElement("input",{id:"nombre",name:"nombre",type:"text",value:this.state.nombre,onChange:this.handleInputChange})),React.createElement("div",{className:"six wide field"},React.createElement("label",{for:"activolabel"},"Activo"),React.createElement("div",{className:"two fields"},React.createElement("div",{className:"field"},React.createElement("div",{class:"ui toggle checkbox"},React.createElement("input",{type:"checkbox",tabindex:"0",class:"hidden",name:"activo",checked:this.state.activo,onChange:this.handleInputChange}))),React.createElement("div",{className:"field"},React.createElement("button",{className:"ui bottom primary basic button",type:"submit",name:"action"},React.createElement("i",{className:"send icon"})," ",this.state.boton," "))))))))))}}]),t}(),Filtros=function(e){_inherits(t,React.Component);function t(e){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleFilterTextInputChange=a.handleFilterTextInputChange.bind(a),a.handleSelect=a.handleSelect.bind(a),a}return _createClass(t,[{key:"handleFilterTextInputChange",value:function(e){this.props.onFilterTextInput(e.target.value)}},{key:"handleSelect",value:function(e){this.props.onSelect(e.target.value)}},{key:"render",value:function(){return React.createElement("div",{className:"row"},React.createElement("div",{className:"ui form"},React.createElement("div",{className:"ui vertical segment"},React.createElement("div",{className:"two fields"},React.createElement("div",{className:"two wide field"},React.createElement("label",null,"Presenta Registros"),React.createElement("select",{name:"registro",value:this.props.registro,onChange:this.handleSelect},React.createElement("option",{value:"15",selected:!0},"15"),React.createElement("option",{value:"25"},"25"),React.createElement("option",{value:"50"},"50"))),React.createElement("div",{className:"ten wide field column right floated"},React.createElement("label",{for:"filtro"},"Buscar"),React.createElement("input",{name:"filtro",id:"filtro",type:"text",value:this.props.filterText,onChange:this.handleFilterTextInputChange}))))))}}]),t}(),Table=function(e){_inherits(t,React.Component);function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _createClass(t,[{key:"render",value:function(){var e=[],t=this.props.datos,a=this.props.onClickPage,n={total_paginas:this.props.datos.total_paginas,pag_actual:this.props.datos.pag_actual};t instanceof Array==!1&&t.datos.forEach(function(t){e.push(React.createElement(RecordDetalle,{registro:t}))});return React.createElement("div",null,React.createElement("div",{className:"ui standard test modal scrolling transition hidden"},React.createElement("div",{className:"ui icon header"},React.createElement("i",{className:"trash outline icon"})," Eliminar"),React.createElement("div",{className:"center aligned content "},React.createElement("p",null,"El registro seleccionado?")),React.createElement("div",{className:"actions"},React.createElement("div",{className:"ui red cancel basic button"},React.createElement("i",{className:"remove icon"})," No "),React.createElement("div",{className:"ui green ok  basic button"},React.createElement("i",{className:"checkmark icon"})," Si "))),React.createElement("table",{className:"ui selectable celled red table"},React.createElement("thead",null,React.createElement(Lista,{enca:["Banco","Nombre","activo","AcciÃ³n"]})),React.createElement("tbody",null,e),React.createElement(Paginacion,{configpage:n,onClickPage:a})))}}]),t}(),Paginacion=function(e){_inherits(t,React.Component);function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _createClass(t,[{key:"render",value:function(){for(var e=[],t=1;t<=this.props.configpage.total_paginas;t++){var a="item";t===this.props.configpage.pag_actual&&(a="active item"),e.push(React.createElement("a",{href:"#!",className:a},t))}return React.createElement("tfoot",null,React.createElement("tr",null,React.createElement("th",{colSpan:"4"},React.createElement("div",{className:"ui right floated pagination menu"},React.createElement("a",{className:"icon item"},React.createElement("i",{className:"left chevron icon"})),e,React.createElement("a",{className:"icon item"},React.createElement("i",{className:"right chevron icon"}))))))}}]),t}(),Inicio=function(e){_inherits(t,React.Component);function t(e){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={registro:"15",filterText:"",data:[],page:0,message:"",statusmessage:"ui floating hidden message"},a.handleFilterTextInput=a.handleFilterTextInput.bind(a),a}return _createClass(t,[{key:"cargarDatos",value:function(){var e=[];e.push({campo:"idbanco",direccion:"ASC"}),$.ajax({url:base_url+"/api/GeneralV1/bancospag/"+this.state.page+"/"+this.state.registro,type:"GET",dataType:"json",data:{orderby:e},success:function(e){this.setState({data:e})}.bind(this),error:function(e,t,a){console.log("error")}.bind(this)})}},{key:"componentDidMount",value:function(){this.cargarDatos.bind(this)()}},{key:"handleFilterTextInput",value:function(e){this.setState({filterText:e})}},{key:"handleSelect",value:function(e){this.setState({registro:e}),this.cargarDatos.bind(this)()}},{key:"handleUpdateRecord",value:function(e,t,a){this.setState({message:e,statusmessage:t}),a&&this.cargarDatos.bind(this)()}},{key:"handleUpdatePage",value:function(e){this.setState(function(e,t){}),this.cargarDatos.bind(this)()}},{key:"handleButton",value:function(e,t){}},{key:"render",value:function(){var e=this;return React.createElement("div",null,React.createElement("div",{className:"ui segment vertical "},React.createElement("div",{className:"ui  basic icon buttons"},React.createElement("button",{className:"ui button","data-tooltip":"Nuevo Registro"},React.createElement("i",{className:"plus square outline icon",onClick:this.handleButton.bind(this,0)})),React.createElement("button",{className:"ui button","data-tooltip":"Formato PDF"},React.createElement("i",{className:"file pdf outline icon",onClick:this.handleButton.bind(this,1)})))),React.createElement(Captura,{onClickAdd:this.handleUpdateRecord.bind(this)}),React.createElement("div",{className:this.state.statusmessage},React.createElement("p",null,React.createElement("b",null,this.state.message)),React.createElement("i",{className:"close icon",onClick:function(){return e.setState({message:"",statusmessage:"ui floating hidden message"})}})),React.createElement(Filtros,{filterText:this.state.filterText,onFilterTextInput:this.handleFilterTextInput,registro:this.state.registro,onSelect:this.handleSelect.bind(this)}),React.createElement(Table,{datos:this.state.data,onClickPage:this.handleUpdatePage}))}}]),t}();ReactDOM.render(React.createElement(Inicio,null),document.getElementById("root"));