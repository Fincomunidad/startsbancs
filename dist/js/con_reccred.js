"use strict";var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Calendar=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,React.Component),_createClass(t,[{key:"render",value:function(){return React.createElement("div",{className:"ui calendar",id:this.props.name},React.createElement("div",{className:"field"},React.createElement("label",null,this.props.label),React.createElement("div",{className:"ui input left icon"},React.createElement("i",{className:"calendar icon"}),React.createElement("input",{ref:"myCalen",type:"text",name:this.props.name,id:this.props.name,placeholder:"Fecha"}))))}}]),t}(),Captura=function(e){function a(e){_classCallCheck(this,a);var t=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={fechaini:"",fechafin:"",csrf:"",message:"",statusmessage:"ui floating hidden message",icons1:"inverted circular search link icon"},t}return _inherits(a,React.Component),_createClass(a,[{key:"componentWillMount",value:function(){$("#csrf").val()}},{key:"handleInputChange",value:function(e){alert(e);var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(_defineProperty({},n,a))}},{key:"handleSubmit",value:function(e){e.preventDefault(),$(".ui.form.formgen").form("validate form");var t=$(".ui.form.formgen").form("is valid");if(this.setState({message:"",statusmessage:"ui message hidden"}),1==t){var a=$(".get.reccred form"),n=a.form("get values"),s=a.form("get value","csrf_bancomunidad_token"),i="Enviar"===this.state.boton?"POST":"PUT",r=this;$(".mini.modal").modal({closable:!1,onApprove:function(){var e={url:base_url+"api/CarteraD1/add_credito",type:i,dataType:"json",data:{csrf_bancomunidad_token:s,data:n}};ajax(e).then(function(e){if("Enviar"===r.state.boton){var t=e.insert_id;r.setState({idcredito:t,idexiste:t,csrf:e.newtoken,message:e.message+e.insert_id,statusmessage:"ui positive floating message ",boton:"Enviar"})}else r.setState({csrf:e.newtoken,message:e.message,statusmessage:"ui positive floating message ",boton:"Actualizar"});r.autoReset()},function(e){if("OK"===e.statusText){var t="",a=e.responseText.indexOf('{"status"');0!==a&&(t=e.responseText.substring(a));var n=JSON.parse(t),s=n.insert_id;r.setState({idcredito:s,idexiste:s,csrf:n.newtoken,message:n.message+n.insert_id,statusmessage:"ui positive floating message ",boton:"Enviar"})}else{console.log("ENTRO REJECT 1");var i=validaError(e);r.setState({csrf:i.newtoken,message:i.message,statusmessage:"ui negative floating message"})}r.autoReset()})}}).modal("show")}else this.setState({message:"Datos incompletos!",statusmessage:"ui negative floating message"}),this.autoReset()}},{key:"autoReset",value:function(){var e=this;window.clearTimeout(e.timeout),""!=e.state.message&&(this.timeout=window.setTimeout(function(){e.setState({message:"",statusmessage:"ui message hidden"})},5e3))}},{key:"handleButton",value:function(e,t){var a="",n="",s=new FormData(document.querySelector("form")),i=!0,r=!1,o=void 0;try{for(var c,l=s.entries()[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var u=c.value;""!=u[0]&&("fechaini"==u[0]?a=u[1]:"fechafin"==u[0]&&(n=u[1]))}}catch(e){r=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}var m=a.split("/"),d=m[2]+"-"+m[1]+"-"+m[0],f=(m=n.split("/"))[2]+"-"+m[1]+"-"+m[0],h=document.createElement("a");10==e?h.href=base_url+"api/ReportD1/pdf_credrecupera_det/"+d+"/"+f:(e=11)&&(h.href=base_url+"api/ReportD1/pdf_credrecupera_gl/"+d+"/"+f),h.target="_blank",document.body.appendChild(h),h.click(),document.body.removeChild(h)}},{key:"handleState",value:function(e,t){this.setState({stepno:e})}},{key:"render",value:function(){new Date;return React.createElement("div",null,React.createElement("div",{className:"ui segment vertical "},React.createElement("div",{className:"row"},React.createElement("h3",{className:"ui rojo header"},"Recuperación de créditos")),React.createElement("div",{className:"ui secondary menu"},React.createElement("div",{className:"ui  basic icon buttons"},React.createElement("button",{className:"ui button","data-tooltip":"Detallado"},React.createElement("i",{className:"file pdf outline icon",onClick:this.handleButton.bind(this,10)})),React.createElement("button",{className:"ui button","data-tooltip":"Global"},React.createElement("i",{className:"file pdf outline icon",onClick:this.handleButton.bind(this,11)}))))),React.createElement("div",{className:"get reccred"},React.createElement("form",{className:"ui form formgen",ref:"form",onSubmit:this.handleSubmit.bind(this),method:"post"},React.createElement("input",{type:"hidden",name:"csrf_bancomunidad_token",value:this.state.csrf}),React.createElement("div",{className:"four fields"},React.createElement("div",{className:"field"},React.createElement(Calendar,{name:"fechaini",label:"Fecha inicial",valor:this.state.fechaini,onChange:this.handleInputChange.bind(this)})),React.createElement("div",{className:"field"},React.createElement(Calendar,{name:"fechafin",label:"Fecha final",valor:this.state.fechafin,onChange:this.handleInputChange.bind(this)}))),React.createElement("div",{className:"four fields"},React.createElement("label",null,/*"Ingrese a la sección CheckList para completar la documentación. "*/)))))}}]),a}();ReactDOM.render(React.createElement(Captura,null),document.getElementById("root"));