"use strict";var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Mensaje=function(e){function t(e){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={icon:"check circle outline icon",titulo:"Autorizar",pregunta:"¿Desea autorizar la reversa del registro?"},a}return _inherits(t,React.Component),_createClass(t,[{key:"render",value:function(){return React.createElement("div",{className:"ui mini test modal scrolling transition hidden"},React.createElement("div",{className:"ui icon header"},React.createElement("i",{className:this.state.icon}),this.state.titulo),React.createElement("div",{className:"center aligned content "},React.createElement("p",null,this.state.pregunta)),React.createElement("div",{className:"actions"},React.createElement("div",{className:"ui red cancel basic button"},React.createElement("i",{className:"remove icon"})," No "),React.createElement("div",{className:"ui green ok basic button"},React.createElement("i",{className:"checkmark icon"})," Si ")))}}]),t}();function Lista(e){var t=e.enca,a=0,n=t.map(function(e){return React.createElement("th",{className:"two wide",key:a++},e)});return React.createElement("tr",null,n)}var RecordDetalle=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,React.Component),_createClass(t,[{key:"handleClick",value:function(e){this.props.onClick(e,this.props.registro.id)}},{key:"render",value:function(){var e="f"==this.props.registro.autoriza||0==this.props.registro.autoriza?"En espera":"Autorizado",t=null;return"f"!=this.props.registro.autoriza&&0!=this.props.registro.autoriza||(t=React.createElement("a",{"data-tooltip":"Autorizar",onClick:this.handleClick.bind(this)},React.createElement("i",{className:"edit icon circular green"}))),React.createElement("tr",null,React.createElement("td",null,this.props.registro.id),React.createElement("td",null,this.props.registro.colmena_nombre),React.createElement("td",null,this.props.registro.grupo_nombre),React.createElement("td",null,this.props.registro.fecha_pago),React.createElement("td",null,this.props.registro.nomov),React.createElement("td",null,this.props.registro.idcaja),React.createElement("td",null,e),React.createElement("td",null,this.props.registro.fecha),React.createElement("td",{className:" center aligned"},t))}}]),t}(),Table=function(e){function t(e){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={grantotal:a.props.totalxpagar},a.handleClick=a.handleClick.bind(a),a}return _inherits(t,React.Component),_createClass(t,[{key:"handleClick",value:function(e,t){this.props.onClick(e,t)}},{key:"render",value:function(){var e=[],t=this.props.datos;if(t instanceof Array==!0){t.forEach(function(t){1,e.push(React.createElement(RecordDetalle,{registro:t,onClick:this.handleClick}))}.bind(this))}return React.createElement("div",{className:"ui grid"},React.createElement("div",{className:"wide column"},React.createElement("table",{className:"ui selectable celled blue table"},React.createElement("thead",null,React.createElement(Lista,{enca:["Id","Colmena","Grupo","Fecha de Pago","No. Mov","No. Caja","Estatus","Fecha Autorizado","Evento"]})),React.createElement("tbody",null,e))))}}]),t}(),Captura=function(e){function t(e){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={csrf:"",message:"",statusmessage:"hidden",catAutoriza:[]},a.handleClick=a.handleClick.bind(a),a}return _inherits(t,React.Component),_createClass(t,[{key:"handleClick",value:function(e,t){var a=t,n=this;$(".get .bovmov form").form("get value","csrf_bancomunidad_token");$(".mini.modal").modal({closable:!1,onApprove:function(){var e={url:base_url+"api/CarteraV1/reversaPagos/"+a,type:"PUT",dataType:"json"};ajax(e).then(function(e){n.setState({csrf:e.newtoken,message:e.message,statusmessage:"ui positive floating message message2"}),n.autoReset(),n.obtenerData()},function(e){var t=validaError(e);n.setState({csrf:t.newtoken,message:t.message,statusmessage:"ui negative floating message message2"}),n.autoReset()})}}).modal("show")}},{key:"componentWillMount",value:function(){var e=$("#csrf").val();this.setState({csrf:e}),this.obtenerData()}},{key:"obtenerData",value:function(){$.ajax({url:base_url+"/api/CarteraV1/reversaPagos",type:"GET",dataType:"json",success:function(e){this.setState({catAutoriza:e.result})}.bind(this),error:function(e,t,a){}.bind(this)})}},{key:"handleButton",value:function(e,t){4==e&&this.findMov()}},{key:"findMov",value:function(){this.obtenerData()}},{key:"autoReset",value:function(){var e=this;window.clearTimeout(e.timeout),this.timeout=window.setTimeout(function(){e.setState({message:"",statusmessage:"ui message hidden"})},5e3)}},{key:"render",value:function(){var e=this;this.state.statusmessage;return React.createElement("div",null,React.createElement("div",{className:"ui segment vertical "},React.createElement("div",{className:"row"},React.createElement("h3",{className:"ui rojo header"},"Autorización de reversa (Movimientos de caja)")),React.createElement("div",{className:"ui  basic icon buttons"},React.createElement("button",{className:"ui button","data-tooltip":"Actualizar"},React.createElement("i",{className:"refresh icon",onClick:this.handleButton.bind(this,4)})))),React.createElement(Mensaje,null),React.createElement("div",{className:"thirteen wide column"},React.createElement("div",{className:this.state.statusmessage},React.createElement("p",null,React.createElement("b",null,this.state.message)),React.createElement("i",{className:"close icon",onClick:function(t){return e.setState({message:"",statusmessage:"ui message hidden"})}}))),React.createElement("div",{className:"get bovmov"},React.createElement("form",{className:"ui form",action:""},React.createElement("input",{type:"hidden",name:"csrf_bancomunidad_token",value:this.state.csrf}),React.createElement(Table,{datos:this.state.catAutoriza,onClick:this.handleClick}))))}}]),t}();ReactDOM.render(React.createElement(Captura,null),document.getElementById("root"));